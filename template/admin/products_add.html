{% extends "index.html" %}
{% load rest_framework %}
{% block menu %}
{% include "admin/admin-nav.html" %}
{% endblock menu %}

{% block content %}

<details class="container my-3">
    <summary class="h4">Add Product</summary>
    <div id="action-bar" class="container row justify-content-center">
        <div class="col-8">
            <form action="{%url 'admin-product-list'%}" method="post">
                <div class="modal-body">



                    {% csrf_token %}
                    {% render_form serializer %}

                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary">Add Product</button>
                </div>
            </form>
        </div>
</details>
<!-- <button type="button" class="btn btn-success col-2 add-button" data-bs-toggle="modal" data-bs-target="#addModal">
        Add
    </button> -->

<details class="container" open>
    <summary class="h4">Product List</summary>
    <div class="d-flex justify-content-between">
        {% if previous %}
        <a href="{{previous}}" class="btn btn-outline-primary btn-block">Previous</a>
        {% else %}
        <button class="btn btn-outline-primary btn-block" disabled="disabled">Previous</button>
        {% endif %}
        <p>{{page_number}}/{{total_pages}}</p>

        {% if next %}
        <a href="{{next}}" class="btn btn-outline-primary btn-block">Next</a>
        {% else %}
        <button class="btn btn-outline-primary btn-block" disabled="disabled">Next</button>
        {% endif %}
    </div>
    <table class="table container">
        <thead>
            <tr>
                <th scope="col">Id</th>
                <th scope="col">Title</th>
                <th scope="col">Inventory</th>
                <th scope="col">Brand</th>
                <th scope="col">Category</th>
                <th scope="col">Active</th>
                <th scope="col">Actions</th>

            </tr>
        </thead>
        <tbody>
            {% for product in results%}
            <tr>



                <th scope="row">{{product.id}}</th>
                <td>{{product.title|capfirst}}</td>
                <td>{{product.inventory}}</td>
                <td>{{product.brand.title}}</td>
                <td>{{product.category.title}}</td>
                <td>{{product.active}}</td>

                <td class="row justify-content-around">
                    <a href="{%url 'admin-product-detail' pk=product.id%}"
                        class="btn btn-outline-secondary p-2 col-5 fs-6">
                        Edit</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</details>







<script>

    document.addEventListener('DOMContentLoaded', function () {
        const detailsElements = document.querySelectorAll('details');

        detailsElements.forEach(details => {
            details.addEventListener('toggle', function (event) {
                detailsElements.forEach(otherDetails => {
                    if (otherDetails !== this) {
                        otherDetails.removeAttribute('open'); // Close other details

                    }
                });
            });
        });
    });






</script>
{% endblock content %}